---
username: synapse # under wich user the server should be installed and run
synapse_version: v0.33.0 # version number or 'master'
git_repo: https://github.com/matrix-org/synapse/archive/{{synapse_version}}.tar.gz
#git_repo: https://github.com/matrix-org/synapse/tarball/master  # URL to Git Repo you want to install
hostname: matrix.domain.com # FQDN to be used
domain: domain.com # Domain Part of the User MXIDs
enable_registration: true # this will open registration by default, take care if you run a public server!
enable_registration_captcha: false
recaptcha_private_key: YOURPRIVATEKEYHERE
recaptcha_public_key: YOURPUBLICKEYHERE
make_migration: true     # Migrate the database from sqlite to postgres
database_secret: YOURDATABASESECRETHERE
max_upload_size: 10M # Max size for uploads. Don't forget to configure your reverse proxy!
#synapse_path: /home/{{ username }}/.synapse/{{synapse_version}}
synapse_path: /home/{{ username }}/.synapse
absolute_path_certificate: "{{ synapse_path }}/{{ domain }}.tls.crt"
absolute_path_key: "{{ synapse_path }}/{{ domain }}.tls.key"
generate_DH_params: true   # Generate DH parameters
DH_params_location: "{{ synapse_path }}/{{ domain }}.tls.dh"
DH_params_size: 4096
x_forwarded: true
url_preview_enabled: false
# Configures synapse to listen on port 8448 or not (if nginx should also reverse proxies this port)
public_base_url_behind_nginx: False
install_postgres: true
install_nginx_package: true
install_reverseproxy: true
letsencrypt: false

install_turnserver: yes
turn_version: 4.5.0.7
turn_archive: coturn-{{ turn_version }}
turn_tarball_url: https://github.com/coturn/coturn/archive/{{ turn_version }}.tar.gz
turn_path: /usr/src
# Define this variables if you want to use a custom turn server AND install_turnserver is set to false.
# Recommended if you do not let the playbook install the cotrun turnserver.
# turn_uris: '"turn:{{ hostname }}:3478?transport=udp\", \"turn:{{ hostname }}:3478?transport=tcp"'
turn_shared_secret: CHANGEME
# turn_username:
# turn_password:

# mxisd (identity server) configuration, only for ldap for now
# For more information see https://github.com/kamax-io/mxisd/
install_mxisd: false
ldap_server:
bind_dn:
bind_pass:
base_dn:
ldap_tls: true
ldap_port: 636
ldap_filter: (&(objectclass=user)(mail=*))

# Configure e-mail Settings
mail: no
mail_from: matrix@{{ domain }}
mail_name: Identity Server
mail_host:
mail_port: 587
# For mxisd: 0 = no STARTLS, 1 = try, 2 = force
mail_tls: 1
# For synapse: True = TLS / False = No TLS (StartTLS not possible)
mail_tls_synapse: True
mail_user:
mail_pass:
notif_from: Your Friendly %(app) Home Server <{{ hostname }}>

# riot webclient
riot_im_version: 0.16.0-rc.2
riot_im_archive: riot-v{{ riot_im_version }}
riot_im_tarball_url: "https://github.com/vector-im/riot-web/releases/download/v{{ riot_im_version }}/{{ riot_im_archive }}.tar.gz"
riot_hostname: "{{ hostname }}" # For security it should be on another domain as the matrix server, so change it!
riot_path_certificate:
riot_path_key:
riot_path: /var/www/{{ riot_hostname }}
riot_integration_ui:
riot_integration_api:
riot_hs_url: "{{ hostname }}"
# Recommended: hostname or vector.im
riot_is_url: "{{ hostname }}"
riot_brand: Riot
# light, dark, simple.im
riot_theme: light